@{
    var controller = ViewContext?.RouteData?.Values["controller"]?.ToString();
    var action = ViewContext?.RouteData?.Values["action"]?.ToString();
    var isAuthenticated = Context?.User?.Identity?.IsAuthenticated ?? false;

    var publicControllers = new[] { "Login", "Register", "Home" };
    var usePublicLayout = !isAuthenticated || (controller != null && publicControllers.Contains(controller));

    Layout = usePublicLayout
        ? "~/Views/Shared/_LayoutPublic.cshtml"
        : "~/Views/Shared/_Layout.cshtml";
}
